function CrosswordCell(r){this["char"]=r,this.across=null,this.down=null}function CrosswordCellNode(r,n){this.is_start_of_word=r,this.index=n}function WordElement(r,n){this.word=r,this.index=n}function Crossword(r,n){var t,e=50,o=50,l={};this.getSquareGrid=function(r){for(var n=null,t=0,e=0;r>e;e++){var o=this.getGrid(1);if(null!=o){var l=1*Math.min(o.length,o[0].length)/Math.max(o.length,o[0].length);if(l>t&&(n=o,t=l),1==t)break}}return n},this.getGrid=function(r){for(var n=0;r>n;n++){c();var e=h(),o=Math.floor(g.length/2),l=Math.floor(g[0].length/2),s=v[0];if("across"==e?l-=Math.floor(s.word.length/2):o-=Math.floor(s.word.length/2),u(s.word,o,l,e)===!1)return t=[s],null;i(s.word,s.index,o,l,e);var d=[];d.push(v.slice(1));for(var w=0;w<d.length;w++){word_has_been_added_to_grid=!1;for(var _=0;_<d[w].length;_++){var s=d[w][_],p=f(s.word);if(p){var o=p.row,l=p.col,m=p.direction;i(s.word,s.index,o,l,m),word_has_been_added_to_grid=!0}else d.length-1==w&&d.push([]),d[w+1].push(s)}if(!word_has_been_added_to_grid)break}if(word_has_been_added_to_grid)return a()}return t=d[d.length-1],null},this.getBadWords=function(){return t},this.getLegend=function(t){for(var e={across:[],down:[]},o=1,l=0;l<t.length;l++)for(var a=0;a<t[l].length;a++){var s=t[l][a],i=!1;for(var d in e)if(s&&s[d]&&s[d].is_start_of_word){var u=s[d].index;e[d].push({position:o,index:u,clue:n[u],word:r[u]}),i=!0}i&&o++}return e};for(var a=function(){for(var r=e-1,n=0,t=o-1,l=0,a=0;e>a;a++)for(var s=0;o>s;s++){var i=g[a][s];null!=i&&(r>a&&(r=a),a>n&&(n=a),t>s&&(t=s),s>l&&(l=s))}for(var d=n-r+1,u=l-t+1,h=new Array(d),a=0;d>a;a++)for(var s=0;u>s;s++)h[a]=new Array(u);for(var a=r,f=0;d>f;a++,f++)for(var s=t,c=0;u>c;s++,c++)h[f][c]=g[a][s];return h},s=function(r,n,t,e,o,a){var s=r.charAt(t);null==g[e][o]&&(g[e][o]=new CrosswordCell(s),l[s]||(l[s]=[]),l[s].push({row:e,col:o}));var i=0==t;g[e][o][a]=new CrosswordCellNode(i,n)},i=function(r,n,t,e,o){if("across"==o)for(var l=e,a=0;l<e+r.length;l++,a++)s(r,n,a,t,l,o);else{if("down"!=o)throw"Invalid Direction";for(var i=t,a=0;i<t+r.length;i++,a++)s(r,n,a,i,e,o)}},d=function(r,n,t){return null==g[n][t]?0:g[n][t]["char"]==r?1:!1},u=function(r,n,t,e){if(0>n||n>=g.length||0>t||t>=g[n].length)return!1;if("across"==e){if(t+r.length>g[n].length)return!1;if(t-1>=0&&null!=g[n][t-1])return!1;if(t+r.length<g[n].length&&null!=g[n][t+r.length])return!1;for(var o=n-1,l=t,a=0;o>=0&&l<t+r.length;l++,a++){var s=null==g[o][l],i=null!=g[n][l]&&g[n][l]["char"]==r.charAt(a),u=s||i;if(!u)return!1}for(var o=n+1,l=t,a=0;o<g.length&&l<t+r.length;l++,a++){var s=null==g[o][l],i=null!=g[n][l]&&g[n][l]["char"]==r.charAt(a),u=s||i;if(!u)return!1}for(var h=0,l=t,a=0;l<t+r.length;l++,a++){var f=d(r.charAt(a),n,l);if(f===!1)return!1;h+=f}}else{if("down"!=e)throw"Invalid Direction";if(n+r.length>g.length)return!1;if(n-1>=0&&null!=g[n-1][t])return!1;if(n+r.length<g.length&&null!=g[n+r.length][t])return!1;for(var l=t-1,o=n,a=0;l>=0&&o<n+r.length;o++,a++){var s=null==g[o][l],i=null!=g[o][t]&&g[o][t]["char"]==r.charAt(a),u=s||i;if(!u)return!1}for(var l=t+1,o=n,a=0;o<n+r.length&&l<g[o].length;o++,a++){var s=null==g[o][l],i=null!=g[o][t]&&g[o][t]["char"]==r.charAt(a),u=s||i;if(!u)return!1}for(var h=0,o=n,a=0;o<n+r.length;o++,a++){var f=d(r.charAt(a,1),o,t);if(f===!1)return!1;h+=f}}return h},h=function(){return Math.floor(2*Math.random())?"across":"down"},f=function(r){for(var n=[],t=0;t<r.length;t++){var e=l[r.charAt(t)];if(e)for(var o=0;o<e.length;o++){var a=e[o],s=a.row,i=a.col,d=u(r,s,i-t,"across"),h=u(r,s-t,i,"down");d!==!1&&n.push({intersections:d,row:s,col:i-t,direction:"across"}),h!==!1&&n.push({intersections:h,row:s-t,col:i,direction:"down"})}}if(0==n.length)return!1;var f=n[Math.floor(Math.random()*n.length)];return f},c=function(){for(var r=0;r<g.length;r++)for(var n=0;n<g[r].length;n++)g[r][n]=null;l={}},g=new Array(e),w=0;e>w;w++)g[w]=new Array(o);for(var v=[],w=0;w<r.length;w++)v.push(new WordElement(r[w],w));v.sort(function(r,n){return n.word.length-r.word.length})}function createCrossword(r,n){var t=new Crossword(r,n),e=10,o=t.getSquareGrid(e);if(null!=o){var l=!0;document.getElementById("crossword").innerHTML=CrosswordUtils.toHtml(o,l);var a=t.getLegend(o);addLegendToPage(a)}else for(var s=t.getBadWords(),i=[],d=0;d<s.length;d++)i.push(s[d].word)}function addLegendToPage(r){for(var n in r){for(var t=[],e=0;e<r[n].length;e++)t.push("<li><strong>"+r[n][e].position+".</strong> "+r[n][e].clue+"</li>");document.getElementById(n).innerHTML=t.join("\n")}}function updateCount(){list.children.length>1?count.innerHTML=list.children.length+" words":count.innerHTML=list.children.length+" word"}var CrosswordUtils={PATH_TO_PNGS_OF_NUMBERS:"numbers/",toHtml:function(r,n){if(null!=r){for(var t=[],e=0;2>e;e++){0==e?t.push("<h1>Student A</h1>"):t.push("<h1>Student B</h1>"),t.push("<table class='crossword'>");for(var o=1,l=0;l<r.length;l++){t.push("<tr>");for(var a=0;a<r[l].length;a++){var s=r[l][a],i=!1;if(null==s)var d="&nbsp;",u="no-border";else{var d=s["char"],u="";1==e?s.across||(d=""):s.down||(d="");var i=s.across&&s.across.is_start_of_word||s.down&&s.down.is_start_of_word}if(i){var h=CrosswordUtils.PATH_TO_PNGS_OF_NUMBERS+o+".png";t.push("<td class='"+u+"' style=\"background-image:url('"+h+"')\">"),o++}else t.push("<td class='"+u+"'>");n?t.push(d):t.push("&nbsp;")}t.push("</tr>")}t.push("</table></br></br>")}return t.join("\n")}}};window.onload=function(){};var newWord=document.getElementById("word-new"),list=document.getElementById("word-list"),count=document.getElementById("word-count"),wordArray=[];list.addEventListener("click",function(r){r.target!==r.currentTarget&&"destroy"==r.target.className&&(r.target.parentElement.parentNode.removeChild(r.target.parentElement),updateCount()),r.stopPropagation()}),newWord.addEventListener("keypress",function(r){if(13==r.keyCode){var n=document.createElement("li");n.innerHTML="<label>"+newWord.value+'</label><button class="destroy"></button>',list.insertBefore(n,list.childNodes[0]),wordArray.push(newWord.value),createCrossword(wordArray,wordArray),newWord.value="",updateCount()}});